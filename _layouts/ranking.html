---
layout: default
subpage-title: Ranking
---
<script src="https://unpkg.com/papaparse@5.3.0/papaparse.min.js" ></script>
<script>
  let rankingCategory = 'ord-percentage';
  let cities = [];

  const selectRanking = (element) => {
    document.getElementById(rankingCategory).classList.remove('ranking-select__button--active');
    element.classList.add('ranking-select__button--active');
    rankingCategory = element.id;
    const listRoot = document.getElementById('city-list');
    listRoot.innerHTML = '';
    if (rankingCategory === 'ord-new') {
      cities.sort((a,b) => parseInt(b.added_total) - parseInt(a.added_total));
    } else {
      cities.sort((a,b) => b.perc_total - a.perc_total);
    }
    cities.forEach((city, index) => {
      listRoot.innerHTML =  listRoot.innerHTML + renderCityElement(city, cities[0], index);
    });
  }

  const handleElementClick = (index) => {
    const shownElements = [...document.getElementsByClassName('shown')].forEach((element) => {
      element.classList.add('hidden');
      element.classList.remove('shown');
    });
    elementToShow = document.getElementById(`details-${index}`)
    elementToShow.classList.remove('hidden');
    elementToShow.classList.add('shown');
  }

  const showMap = (cityName) => {
    window.location = `https://api.cargorocket.de/dr/docs/datenrennen_maps/${cityName}_map.html`;
  }

  const renderContribute = () => {
    return `
        <div class="contribution__modal">
          <h3 class="contribution__modal__title">Werde Datenspender!</h3>
          <p class="contribution__modal__description">
            Unterstütze deine Region beim Lastenradrouting mit OpenData.<br>
            Das geht ganz einfach! Rufe einen unserer Datenspender Links auf und unterstütze deine Gemeinde mit hilfreichen Informationen für das Lastenradrouting.<br>
            Alle deine Beiträge stehen dann auch für die Allgemeinheit über OpenStreetMap zur Verfügung.<br>
            Unser Ranking wird jeden Tag aktualisiert! Bringe deine Region auf das Siegerpodest!
          </p>
          <span class="contribution__modal__links">Zum Einstieg findest du Nützliche Links hier:</span>
          <div class="contribution__options">
            <a href="https://cargorocket.de/2021/04/17/mapping-tutorial.html">
              <img src="/assets/images/cargorocket-logo.svg">Unser Mapathon Tutorial
            </a>
            <a href="https://wiki.openstreetmap.org/wiki/DE:Cargobike">
              <img src="/assets/images/osm.svg">OpenStreetMap Wiki (Tag Informationen)
            </a>
            <a href="https://www.openstreetmap.org/edit">
              <img src="/assets/images/osm.svg">ID Editor (Web)
            </a>
            <a href="https://vespucci.io/">
              <img src="/assets/images/vespucci.png">Vespucci App (Android)
            </a>
            <a href="https://apps.apple.com/app/id592990211">
              <img src="/assets/images/gomap.png">Go Map!! (iOS)
            </a>
            <a href="https://github.com/streetcomplete/StreetComplete/#screenshots">
              <img src="/assets/images/street-complete.png">Street Complete App (Android)
            </a>
          </div>
    `
  }

  const closeContributionModal = (event) => {
    if (event.target === document.getElementById('contribution')) {
      document.getElementById('contribution').remove();
    }
  }

  const openContributionModal = () => {
    if (!document.getElementById('contribution')) {
      const contribute = document.createElement("div");
      contribute.id = "contribution";
      contribute.classList = ['contribution'];
      contribute.onclick = closeContributionModal;
      contribute.innerHTML = renderContribute();
      document.body.appendChild(contribute);
    }
  }

  const renderPosition = (position) => {
    if (position === 1) {
      return `<svg id="Layer_1" enable-background="new 0 0 512 512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><g><g><g><path d="m273.442 406.368c.87 12.5 2.67 25.57 5.81 38.59h-46.48c3.14-13.02 4.94-26.09 5.81-38.59l-.22-43.52c-1.78-23.78-5.59-39.84-5.59-39.84h46.48s-3.81 16.06-5.59 39.84z" fill="#ffe0a9"/><path d="m273.442 406.368c.87 12.5 2.67 25.57 5.81 38.59h-19c-3.14-13.02-4.94-26.09-5.81-38.59l.22-43.52c1.78-23.78 5.59-39.84 5.59-39.84h19s-3.81 16.06-5.59 39.84z" fill="#ffcb78"/></g><path d="m370.471 504.498h-228.92c43.99 0-25.1-55.42 98.42-59.75h.08c5-.18 10.31-.27 15.96-.27 145.361 0 68.68 60.02 114.46 60.02z" fill="#5c5e89"/><path d="m370.471 504.498h-32c-43.99 0 25.1-55.42-98.42-59.75 5-.18 10.31-.27 15.96-.27 145.361 0 68.68 60.02 114.46 60.02z" fill="#454068"/><g><path d="m256.012 323.668c-4.45 0-8.78-.08-13-.25-257.17-9.87-82.92-315.919-175.79-315.919h377.58c-94.391 0 87.159 316.169-188.79 316.169z" fill="#ffa757"/><path d="m256.012 323.668c-4.45 0-8.78-.08-13-.25 257.17-9.87 82.92-315.919 175.79-315.919h26c-94.391 0 87.159 316.169-188.79 316.169z" fill="#ff895a"/></g><path d="m300.22 216.072c-.598-.081-11.387-1.522-25.842-2.247 2.69-66.098-.704-128.368-.742-129.038-.372-6.667-5.088-12.288-11.579-13.801s-13.199 1.448-16.468 7.266c-14.381 25.594-36.956 35.581-37.558 35.842-7.616 3.172-11.251 11.917-8.122 19.574 3.14 7.682 11.902 11.359 19.565 8.213.787-.323 12.244-5.135 25.565-16.5.514 23.682.687 55.608-.683 88.375-15.161.698-26.639 2.232-27.257 2.315-8.208 1.111-13.96 8.677-12.855 16.901 1.105 8.225 8.653 13.989 16.865 12.89.177-.024 17.931-2.382 37.5-2.387h.064.066c19.557.006 37.294 2.363 37.465 2.386.682.092 1.357.137 2.027.137 7.392 0 13.829-5.477 14.846-13.02 1.109-8.225-4.647-15.795-12.857-16.906z" fill="#ffe0a9"/><path d="m283.962 384.518c0 15.44-12.51 27.96-27.95 27.96-3.91 0-7.63-.8-11-2.25-9.97-4.27-16.95-14.18-16.95-25.71s6.98-21.43 16.95-25.7c3.37-1.45 7.09-2.25 11-2.25 15.44 0 27.95 12.51 27.95 27.95z" fill="#ffcb78"/><path d="m283.962 384.518c0 15.44-12.51 27.96-27.95 27.96-3.91 0-7.63-.8-11-2.25 9.97-4.27 16.95-14.18 16.95-25.71s-6.98-21.43-16.95-25.7c3.37-1.45 7.09-2.25 11-2.25 15.44 0 27.95 12.51 27.95 27.95z" fill="#ffa757"/></g><g><path d="m216.111 208.64c-12.285 1.664-20.933 13.028-19.279 25.333 1.653 12.301 12.997 20.974 25.293 19.324.173-.023 17.547-2.316 36.439-2.32h.183c18.989.006 36.283 2.295 36.459 2.319 1.004.135 2.022.204 3.028.204 11.199-.001 20.776-8.392 22.275-19.519 1.658-12.309-6.991-23.677-19.287-25.342-.972-.131-8.427-1.11-19.068-1.858.234-6.845.416-13.888.543-21.022.073-4.142-3.225-7.558-7.366-7.632-4.1-.049-7.558 3.224-7.632 7.366-.17 9.602-.441 19.032-.808 28.028-.167 4.111 3.01 7.589 7.118 7.795 14.099.707 24.765 2.128 25.206 2.188 4.1.555 6.983 4.356 6.429 8.474-.501 3.718-3.688 6.522-7.411 6.522-.337 0-.683-.023-1.008-.067-.178-.024-18.418-2.449-38.475-2.456h-.057c-.027 0-.057 0-.075 0-20.111.004-38.313 2.43-38.486 2.453-4.106.551-7.882-2.348-8.434-6.456-.553-4.116 2.33-7.916 6.418-8.469.477-.064 11.841-1.576 26.597-2.256 3.883-.179 6.986-3.295 7.148-7.179 1.423-34.028 1.16-67.1.688-88.852-.062-2.896-1.788-5.497-4.431-6.682-2.644-1.184-5.733-.741-7.935 1.139-12.501 10.667-23.097 15.085-23.54 15.267-1.846.759-3.878.751-5.719-.021-1.851-.775-3.29-2.228-4.051-4.091-1.564-3.827.258-8.229 4.061-9.814.034-.014.067-.028.101-.043 1.035-.449 25.524-11.316 41.104-39.049 1.623-2.891 5.008-4.385 8.223-3.635 3.226.751 5.606 3.595 5.792 6.911.016.292 1.619 29.698 1.757 69.278.015 4.133 3.369 7.474 7.499 7.474h.027c4.142-.015 7.488-3.384 7.474-7.526-.14-39.963-1.764-69.757-1.78-70.057-.554-9.927-7.693-18.434-17.363-20.688-9.671-2.255-19.835 2.226-24.705 10.897-12.863 22.896-33.178 32.266-33.975 32.625-11.332 4.771-16.76 17.897-12.099 29.301 2.278 5.577 6.59 9.928 12.141 12.253 5.542 2.321 11.655 2.342 17.213.06.932-.383 7.083-2.997 15.461-8.573.232 18.669.196 42.115-.666 66.403-11.641.759-19.959 1.85-21.027 1.993z"/><path d="m478.737 46.535c-17.867-10.928-40.234-12.459-55.66-3.812-.137.077-.273.154-.408.232 1.154-10.104 3.55-18.063 7.94-22.742 3.337-3.557 7.846-5.213 14.188-5.213 4.143 0 7.5-3.358 7.5-7.5s-3.357-7.5-7.5-7.5h-93.005c-4.143 0-7.5 3.358-7.5 7.5s3.357 7.5 7.5 7.5h63.973c-11.668 18.316-9.613 50.534-7.074 90.366 3.649 57.234 8.19 128.464-31.7 170.979-25.143 26.798-64.717 39.825-120.982 39.825-56.264 0-95.838-13.027-120.982-39.825-39.889-42.514-35.348-113.744-31.699-170.978 2.539-39.833 4.594-72.051-7.074-90.367h221.233c4.143 0 7.5-3.358 7.5-7.5s-3.357-7.5-7.5-7.5h-250.264c-4.142 0-7.5 3.358-7.5 7.5s3.358 7.5 7.5 7.5c6.343 0 10.852 1.657 14.188 5.213 4.392 4.681 6.788 12.645 7.942 22.755-.142-.082-.285-.164-.429-.245-15.428-8.648-37.795-7.116-55.659 3.812-13.098 8.011-34.823 27.911-33.177 71.185.85 22.357 10.009 40.538 28 55.581 1.404 1.173 3.11 1.746 4.807 1.746 2.144 0 4.274-.915 5.758-2.689 2.657-3.178 2.235-7.908-.943-10.565-14.954-12.503-21.934-26.271-22.633-44.643-1.355-35.634 15.716-51.521 26.013-57.818 13.173-8.058 29.824-9.507 40.498-3.524 5.538 3.105 8.419 7.654 8.569 13.527-.263 10.983-1.023 22.92-1.799 35.078-1.798 28.207-3.803 59.649-.846 89.963-6.888-5.337-14.777-9.969-22.559-14.538l-1.675-.983c-3.569-2.098-8.166-.906-10.266 2.665s-.906 8.167 2.665 10.266l1.682.988c17.944 10.535 33.441 19.633 35.848 34.87 3.018 19.101-14.463 25.212-16.424 25.833-3.964 1.202-6.204 5.389-5.002 9.353.982 3.239 3.957 5.327 7.175 5.327.721 0 1.453-.104 2.178-.324 6.08-1.843 14.803-6.645 20.771-14.88 5.478 12.204 12.709 23.561 22.184 33.659 23.342 24.878 57.022 39.148 102.447 43.288 1.128 5.905 2.902 16.515 4.059 29.93-6.208 6.389-10.037 15.104-10.037 24.696 0 9.707 3.921 18.515 10.261 24.924-.833 9.914-2.225 19.465-4.15 28.502-26.816 1.951-45.764 6.86-57.531 14.853-15.29 10.387-16.418 24.236-17.165 33.4-.292 3.583-.594 7.289-1.669 8.765-.941 1.292-4.13 2.034-8.75 2.034-4.142 0-7.5 3.358-7.5 7.5s3.358 7.5 7.5 7.5h57.253c4.142 0 7.5-3.358 7.5-7.5s-3.358-7.5-7.5-7.5h-33.286c.891-3.289 1.165-6.658 1.403-9.581.693-8.509 1.291-15.857 10.643-22.21 12.923-8.779 39.315-13.23 78.441-13.23 39.127 0 65.518 4.451 78.442 13.23 9.351 6.353 9.95 13.702 10.643 22.21.238 2.923.513 6.292 1.403 9.581h-113.93c-4.142 0-7.5 3.358-7.5 7.5s3.358 7.5 7.5 7.5h137.899c4.142 0 7.5-3.358 7.5-7.5s-3.357-7.5-7.5-7.5c-4.62 0-7.81-.741-8.751-2.034-1.074-1.477-1.376-5.182-1.668-8.765-.747-9.164-1.876-23.013-17.166-33.4-11.766-7.993-30.714-12.902-57.53-14.853-1.926-9.039-3.317-18.59-4.151-28.502 6.34-6.409 10.261-15.217 10.261-24.924 0-9.592-3.828-18.306-10.037-24.696 1.158-13.415 2.931-24.025 4.059-29.93 45.425-4.14 79.105-18.41 102.446-43.288 9.47-10.093 16.7-21.444 22.176-33.642 5.968 8.225 14.683 13.022 20.759 14.864.724.219 1.454.324 2.173.324 3.197 0 6.148-2.072 7.145-5.29 1.221-3.939-.992-8.132-4.924-9.376-2.003-.634-19.484-6.745-16.466-25.846 2.407-15.237 17.905-24.336 35.85-34.871 24.797-14.558 55.657-32.675 57.268-75.051 1.649-43.278-20.075-63.178-33.172-71.189zm-222.727 284.634c4.786 0 9.464-.091 14.034-.273-.882 5.026-1.928 11.833-2.818 19.988-3.526-1.179-7.298-1.819-11.216-1.819s-7.689.64-11.216 1.819c-.889-8.155-1.935-14.962-2.817-19.988 4.57.182 9.247.273 14.033.273zm0 105.81c-4.806 0-9.429.065-13.875.197 1.191-6.129 2.156-12.455 2.89-18.939 3.46 1.13 7.152 1.742 10.985 1.742s7.525-.612 10.986-1.742c.734 6.483 1.699 12.809 2.89 18.939-4.446-.132-9.07-.197-13.876-.197zm0-32c-11.276 0-20.451-9.177-20.451-20.457s9.174-20.457 20.451-20.457c11.276 0 20.451 9.177 20.451 20.457s-9.175 20.457-20.451 20.457zm240.913-287.829c-1.3 34.169-25.994 48.666-49.875 62.686-7.775 4.565-15.656 9.192-22.54 14.523 2.954-30.308.95-61.744-.848-89.946-.783-12.288-1.552-24.35-1.806-35.429.255-5.703 3.131-10.133 8.557-13.175 10.671-5.982 27.325-4.534 40.498 3.524 10.298 6.296 27.369 22.183 26.014 57.817z"/><circle cx="375.387" cy="227.779" r="7.5"/><circle cx="355.257" cy="259.999" r="7.5"/><circle cx="323.347" cy="280.609" r="7.5"/><circle cx="136.489" cy="227.779" r="7.5"/><circle cx="380.747" cy="78.519" r="7.5"/><circle cx="377.747" cy="44.059" r="7.5"/><circle cx="340.748" cy="42.059" r="7.5"/><circle cx="131.749" cy="78.519" r="7.5"/><circle cx="134.749" cy="44.059" r="7.5"/><circle cx="171.749" cy="42.059" r="7.5"/><circle cx="156.619" cy="259.999" r="7.5"/><circle cx="188.529" cy="280.609" r="7.5"/></g></g></svg>`;
    } else if (position === 2) {
      return `<svg id="Capa_1" enable-background="new 0 0 512 512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><g><g><path d="m256 365.128 48.336 138.872 45.41-44.406 63.168 6.614-48.066-138.096c-30.133 23.206-67.875 37.016-108.848 37.016z" fill="#98db7c"/><path d="m256 365.128c-40.973 0-78.715-13.81-108.848-37.015l-48.066 138.095 63.168-6.614 45.41 44.406z" fill="#98db7c"/><path d="m372.515 350.14-7.667-22.028c-30.132 23.206-67.875 37.015-108.848 37.015l7.69 22.094c40.491-1.525 77.916-15.026 108.825-37.081z" fill="#82d361"/><path d="m248.31 387.221 7.69-22.094c-40.973 0-78.715-13.81-108.848-37.015l-7.667 22.028c30.909 22.055 68.334 35.556 108.825 37.081z" fill="#82d361"/><ellipse cx="256" cy="186.564" fill="#e0e0e0" rx="178.564" ry="178.564" transform="matrix(.707 -.707 .707 .707 -56.94 235.663)"/><path d="m256 347.128c-95.6 0-173.651-75.128-178.339-169.564-.148 2.982-.225 5.982-.225 9 0 98.618 79.946 178.564 178.564 178.564s178.564-79.946 178.564-178.564c0-3.018-.077-6.018-.225-9-4.688 94.436-82.739 169.564-178.339 169.564z" fill="#cecece"/><ellipse cx="256" cy="186.564" fill="#9e9e9e" rx="140.67" ry="140.67" transform="matrix(.707 -.707 .707 .707 -56.94 235.663)"/><path d="m256 309.234c-74.666 0-135.734-58.175-140.376-131.67-.188 2.977-.295 5.976-.295 9 0 77.69 62.98 140.67 140.67 140.67s140.67-62.98 140.67-140.67c0-3.024-.107-6.023-.295-9-4.64 73.495-65.708 131.67-140.374 131.67z" fill="#898989"/><path d="m296.493 278.768h-80.631c-9.766 0-17.684-7.917-17.684-17.684 0-15.096 5.37-29.755 15.12-41.279l56.733-67.051c5.309-6.274 2.94-13.034 2.087-14.957-1.037-2.338-4.26-7.804-11.77-8.057-.217-.008-.442-.012-.669-.012-10.548 0-19.13 8.582-19.13 19.13 0 9.767-7.917 17.684-17.684 17.684-9.766 0-17.684-7.917-17.684-17.684 0-30.05 24.448-54.498 54.497-54.498.621 0 1.24.011 1.857.031 18.803.635 35.244 11.773 42.914 29.069 7.784 17.553 4.941 37.532-7.419 52.14l-56.733 67.051c-.209.247-.413.497-.613.75h56.809c9.766 0 17.684 7.917 17.684 17.684 0 9.766-7.917 17.683-17.684 17.683z" fill="#e0e0e0"/><g><path d="m296.493 260.768h-80.631c-7.6 0-14.061-4.803-16.562-11.532-.735 3.886-1.122 7.85-1.122 11.848 0 9.767 7.918 17.684 17.684 17.684h80.631c9.766 0 17.684-7.917 17.684-17.684 0-3.291-.915-6.361-2.481-9-3.081 5.193-8.727 8.684-15.203 8.684z" fill="#cecece"/></g></g><g><path d="m207.472 214.904c-10.916 12.903-16.928 29.317-16.928 46.219 0 13.915 11.32 25.236 25.236 25.236h80.798c13.915 0 25.237-11.321 25.237-25.236s-11.321-25.236-25.237-25.236h-40.743l13.944-16.479c2.681-3.169 2.286-7.911-.883-10.592-3.171-2.681-7.912-2.285-10.592.883l-23.776 28.099c-.265.314-.523.63-.778.952-1.783 2.261-2.117 5.342-.86 7.933s3.883 4.236 6.762 4.236h56.926c5.628 0 10.206 4.578 10.206 10.205s-4.578 10.205-10.206 10.205h-80.798c-5.627 0-10.205-4.578-10.205-10.205 0-13.352 4.749-26.318 13.372-36.511l56.851-67.189c6.469-7.646 5.908-16.837 3.224-22.891-3.361-7.575-10.243-12.262-18.411-12.538-.3-.01-.611-.016-.923-.016-14.714 0-26.685 11.971-26.685 26.685 0 5.627-4.578 10.205-10.205 10.205s-10.205-4.578-10.205-10.205c0-25.969 21.127-47.095 47.094-47.095.539 0 1.076.009 1.607.027 15.935.538 29.878 9.989 36.386 24.665 6.623 14.933 4.208 31.926-6.301 44.347l-13.656 16.139c-2.681 3.169-2.286 7.911.883 10.592 3.169 2.68 7.911 2.285 10.592-.883l13.656-16.139c14.262-16.857 17.545-39.905 8.568-60.149-8.864-19.987-27.877-32.859-49.624-33.594-.7-.023-1.404-.035-2.11-.035-34.256 0-62.125 27.87-62.125 62.126 0 13.915 11.32 25.236 25.236 25.236 13.915 0 25.236-11.321 25.236-25.236 0-6.426 5.228-11.654 11.654-11.654.142 0 .282.003.417.007 2.409.081 4.151 1.296 5.177 3.608.647 1.46 1.383 4.322-.958 7.089z"/><path d="m404.477 186.449c0-81.871-66.606-148.477-148.477-148.477s-148.477 66.606-148.477 148.477c0 4.151 3.364 7.516 7.516 7.516 4.151 0 7.516-3.365 7.516-7.516 0-73.583 59.864-133.446 133.445-133.446s133.445 59.863 133.445 133.446-59.864 133.446-133.445 133.446c-30.67 0-60.618-10.66-84.329-30.018-23.387-19.093-39.759-45.757-46.101-75.081-.877-4.055-4.87-6.631-8.934-5.757-4.057.877-6.635 4.877-5.757 8.934 7.058 32.639 25.272 62.31 51.286 83.547 26.387 21.542 59.711 33.405 93.835 33.405 81.87.001 148.477-66.605 148.477-148.476z"/><path d="m397.573 398.801c-1.363-3.92-5.642-5.992-9.569-4.627-3.919 1.364-5.991 5.648-4.627 9.568l18.873 54.223-51.527-5.396c-2.221-.228-4.437.537-6.038 2.102l-37.041 36.223-41.174-118.295c35.041-1.949 67.527-13.62 94.807-32.352l12.21 35.08c3.772 9.468 16.994 4.184 14.195-4.941l-13.785-39.606c41.815-34.22 68.552-86.209 68.552-144.33 0-102.809-83.641-186.45-186.449-186.45s-186.449 83.641-186.449 186.449c0 58.121 26.737 110.11 68.552 144.33l-46.44 133.422c-1.702 4.41 2.201 10.652 7.881 9.945l59.787-6.26 42.978 42.029c3.298 3.48 10.533 2.526 12.353-2.903l41.338-118.767 41.338 118.768c1.586 4.729 8.111 6.894 12.353 2.903l42.978-42.029 59.787 6.26c4.964.628 9.663-4.541 7.88-9.945zm-312.991-212.352c0-94.52 76.898-171.418 171.418-171.418s171.418 76.898 171.418 171.418-76.897 171.418-171.418 171.418-171.418-76.897-171.418-171.418zm119.774 304.445-37.041-36.223c-1.599-1.563-3.804-2.333-6.038-2.101l-51.527 5.395 40.974-117.718c27.28 18.732 59.766 30.403 94.807 32.352z"/></g></g></svg>`
    } else if (position === 3) {
      return `<svg id="Capa_1" enable-background="new 0 0 512 512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><g><g><ellipse cx="256" cy="186.564" fill="#ff9838" rx="178.564" ry="178.564" transform="matrix(.707 -.707 .707 .707 -56.94 235.663)"/><path d="m256 347.128c-95.6 0-173.651-75.128-178.339-169.564-.148 2.981-.225 5.982-.225 9 0 98.618 79.946 178.564 178.564 178.564s178.564-79.946 178.564-178.564c0-3.018-.077-6.019-.225-9-4.688 94.436-82.739 169.564-178.339 169.564z" fill="#ff8709"/><path d="m256 365.128 48.336 138.872 45.41-44.406 63.168 6.614-48.066-138.096c-30.133 23.206-67.875 37.016-108.848 37.016z" fill="#0083fd"/><path d="m256 365.128c-40.973 0-78.715-13.81-108.848-37.015l-48.066 138.095 63.168-6.614 45.41 44.406z" fill="#0083fd"/><ellipse cx="256" cy="186.564" fill="#ce7430" rx="140.67" ry="140.67" transform="matrix(.707 -.707 .707 .707 -56.94 235.663)"/><path d="m256 309.234c-74.666 0-135.734-58.175-140.376-131.67-.188 2.977-.295 5.976-.295 9 0 77.69 62.98 140.67 140.67 140.67s140.67-62.98 140.67-140.67c0-3.024-.107-6.023-.295-9-4.64 73.495-65.708 131.67-140.374 131.67z" fill="#bc672e"/><path d="m372.515 350.14-7.667-22.028c-30.132 23.206-67.875 37.015-108.848 37.015l7.69 22.094c40.491-1.525 77.916-15.026 108.825-37.081z" fill="#0072fc"/><path d="m248.31 387.221 7.69-22.094c-40.973 0-78.715-13.81-108.848-37.015l-7.667 22.028c30.909 22.055 68.334 35.556 108.825 37.081z" fill="#0072fc"/><path d="m256.178 278.768c-30.296 0-54.944-24.648-54.944-54.944 0-9.767 7.918-17.684 17.684-17.684s17.684 7.917 17.684 17.684c0 10.795 8.781 19.576 19.576 19.576s19.577-8.782 19.577-19.576-8.782-19.577-19.577-19.577c-9.766 0-17.684-7.917-17.684-17.684s7.917-17.684 17.684-17.684c10.795 0 19.577-8.782 19.577-19.576 0-10.795-8.782-19.576-19.577-19.576s-19.576 8.781-19.576 19.576c0 9.767-7.918 17.684-17.684 17.684s-17.684-7.917-17.684-17.684c0-30.296 24.648-54.944 54.944-54.944 30.297 0 54.944 24.648 54.944 54.944 0 14.366-5.54 27.459-14.599 37.26 9.059 9.8 14.599 22.895 14.599 37.261 0 30.296-24.648 54.944-54.944 54.944z" fill="#ffaa5c"/><g fill="#ea9957"><path d="m256.178 186.247c-6.475 0-12.122-3.491-15.203-8.684-1.566 2.639-2.481 5.709-2.481 9 0 9.767 7.917 17.684 17.684 17.684 7.549 0 14.101 4.302 17.366 10.577 1.404-2.698 2.21-5.754 2.21-9 0-10.794-8.782-19.577-19.576-19.577z"/><path d="m256.178 260.768c-26.335 0-48.392-18.627-53.712-43.395-.785 2.001-1.232 4.172-1.232 6.451 0 30.296 24.648 54.944 54.944 54.944 30.297 0 54.945-24.648 54.945-54.944 0-3.064-.267-6.064-.751-8.993-4.312 26.025-26.966 45.937-54.194 45.937z"/></g></g><g><path d="m256.178 235.888c-6.673 0-12.101-5.428-12.101-12.101 0-13.915-11.32-25.236-25.236-25.236s-25.237 11.32-25.237 25.236c0 34.503 28.071 62.574 62.574 62.574s62.574-28.071 62.574-62.574c0-13.546-4.358-26.579-12.384-37.338 8.026-10.757 12.384-23.789 12.384-37.337 0-11.541-3.182-22.828-9.204-32.641-2.172-3.539-6.801-4.646-10.337-2.475-3.538 2.172-4.645 6.799-2.475 10.337 4.569 7.445 6.984 16.014 6.984 24.779 0 11.975-4.486 23.422-12.632 32.236-2.662 2.88-2.662 7.323 0 10.203 8.147 8.813 12.632 20.262 12.632 32.236 0 26.215-21.327 47.543-47.542 47.543s-47.543-21.327-47.543-47.543c0-5.627 4.578-10.205 10.206-10.205 5.627 0 10.205 4.578 10.205 10.205 0 14.961 12.172 27.132 27.132 27.132s27.132-12.172 27.132-27.132-12.172-27.132-27.132-27.132c-5.627 0-10.205-4.578-10.205-10.206 0-5.627 4.578-10.205 10.205-10.205 14.961 0 27.132-12.172 27.132-27.132s-12.172-27.132-27.132-27.132-27.132 12.172-27.132 27.132c0 5.627-4.578 10.205-10.205 10.205-5.628 0-10.206-4.578-10.206-10.205 0-26.215 21.327-47.542 47.543-47.542 7.558 0 14.784 1.728 21.479 5.136 3.7 1.884 8.225.412 10.107-3.288 1.883-3.699.411-8.224-3.288-10.107-8.827-4.494-18.348-6.772-28.298-6.772-34.503 0-62.574 28.071-62.574 62.574 0 13.916 11.321 25.236 25.237 25.236 13.915 0 25.236-11.32 25.236-25.236 0-6.673 5.428-12.101 12.101-12.101s12.101 5.428 12.101 12.101-5.428 12.101-12.101 12.101c-13.916 0-25.236 11.32-25.236 25.236s11.32 25.237 25.236 25.237c6.673 0 12.101 5.428 12.101 12.101s-5.428 12.1-12.101 12.1z"/><path d="m404.477 186.45c0-81.871-66.606-148.478-148.477-148.478s-148.477 66.606-148.477 148.478c0 4.151 3.364 7.516 7.516 7.516 4.151 0 7.516-3.364 7.516-7.516 0-73.583 59.864-133.447 133.446-133.447s133.446 59.864 133.446 133.447c0 73.582-59.864 133.446-133.446 133.446-30.67 0-60.619-10.661-84.329-30.017-23.387-19.093-39.759-45.757-46.1-75.081-.878-4.056-4.87-6.632-8.935-5.758-4.057.878-6.635 4.878-5.758 8.934 7.059 32.64 25.273 62.31 51.287 83.548 26.387 21.542 59.711 33.405 93.835 33.405 81.869-.001 148.476-66.607 148.476-148.477z"/><path d="m397.573 398.8c-1.363-3.919-5.642-5.994-9.569-4.627-3.919 1.364-5.991 5.648-4.627 9.569l18.873 54.223-51.527-5.396c-2.216-.232-4.437.536-6.038 2.101l-37.041 36.223-41.174-118.295c35.041-1.949 67.527-13.62 94.807-32.352l12.21 35.08c1.079 3.102 3.988 5.047 7.098 5.047.819 0 1.653-.135 2.471-.42 3.919-1.364 5.991-5.648 4.627-9.569l-13.785-39.606c41.814-34.22 68.552-86.209 68.552-144.33-.001-102.807-83.642-186.448-186.45-186.448s-186.449 83.641-186.449 186.45c0 58.121 26.737 110.11 68.552 144.33l-46.44 133.423c-1.702 4.412 2.2 10.651 7.881 9.945l59.787-6.261 42.978 42.029c3.298 3.479 10.533 2.526 12.353-2.902l41.338-118.768 41.338 118.768c1.587 4.728 8.112 6.893 12.353 2.902l42.978-42.029 59.787 6.261c4.965.631 9.663-4.542 7.881-9.945zm-312.991-212.35c0-94.52 76.897-171.419 171.418-171.419s171.418 76.898 171.418 171.419-76.897 171.417-171.418 171.417-171.418-76.897-171.418-171.417zm119.774 304.444-37.041-36.223c-1.599-1.563-3.804-2.335-6.038-2.101l-51.527 5.396 40.974-117.719c27.28 18.732 59.766 30.403 94.807 32.352z"/></g></g></svg>`
    }
    return `<span>${position}</span>`;
  }

  const renderCityElement = (city, first, index) => {
    return `
      <div class="list-entry" onclick="handleElementClick(${index})">
        <div class="list-entry__header">
          <div class="list-entry__header__icon">
            ${renderPosition(index + 1)}
          </div>
          <div class="spacer"></div>
          <span>${city.kreis_name}</span>
          <div class="spacer"></div>
          <span>
            ${rankingCategory === 'ord-new'
              ? parseInt(city.added_total)
              : `${city.perc_total}%`
            }
          </span>
        </div>
        <div id="details-${index}" class="list-entry__details hidden">
          <button class="check-button" onclick="showMap('${city.kreis_name}')">Daten-Karte ></button>
          <table class="key-table">
            <tr>
              <th>Tag</th>
              <th>${city.kreis_name}</th>
              ${city != first ? `<th>${first.kreis_name}</th>` : ''}
            </tr>

            <tr>
              <th>
                <div class="key-table__column">
                  <span class="title">Radwege</span>
                  <span>(Tag: <a href="https://wiki.openstreetmap.org/wiki/Tag:highway%3Dcycleway">cycleway</a>)</span>
                  <span>Anzahl: ${city.count_cycleways}</span>
                  <span>Neu Erfasst: ${city.added_cycleways}</span>
                </div>
              </th>
              <th>
                <div class="key-table__column">
                  <span class="key-table__column__value"><span class="key-table__column__key">Surface:</span> ${city.perc_with_surface}%</span>
                  <span class="key-table__column__value"><span class="key-table__column__key">Smoothness:</span> ${city.perc_with_smoothness}%</span>
                  <span class="key-table__column__value"><span class="key-table__column__key">Width:</span> ${city.perc_with_width}%</span>
                </div>
              </th>
              ${city != first ? `
                <th>
                  <div class="key-table__column">
                    <span class="key-table__column__value"><span class="key-table__column__key">Surface:</span> ${first.perc_with_surface}%</span>
                    <span class="key-table__column__value"><span class="key-table__column__key">Smoothness:</span> ${first.perc_with_smoothness}%</span>
                    <span class="key-table__column__value"><span class="key-table__column__key">Width:</span> ${first.perc_with_width}%</span>
                  </div>
                </th>
              ` : ''}
            </tr>

            <tr>
              <th>
                <div class="key-table__column">
                  <span class="title">Barrieren</span>
                  <span>
                    (Tag:
                      <a href="https://wiki.openstreetmap.org/wiki/Tag:barrier%3Dbollard">
                        barrier=bollard, block, cycle_barrier
                      </a>
                    )
                  </span>
                  <span>Anzahl: ${city.count_barriers}</span>
                  <span>Neu Erfasst: ${city.added_barriers}</span>
                </div>
              </th>
              <th>
                <div class="key-table__column">
                  <span class="key-table__column__value"><span class="key-table__column__key">max-width:</span> ${city.perc_with_barrier_maxwidth}%</span>
                </div>
              </th>
              ${city != first ? `
                <th>
                  <div class="key-table__column">
                    <span class="key-table__column__value"><span class="key-table__column__key">max-width:</span> ${first.perc_with_barrier_maxwidth}%</span>
                  </div>
                </th>
              ` : ''}
            </tr>
            <tr>
              <th>
                <div class="key-table__column">
                  <span class="title">Bordsteine</span>
                  <span>(Tag: <a href="https://wiki.openstreetmap.org/wiki/Key:kerb">kerbs</a>)</span>
                  <span>Anzahl: ${city.count_kerbs}</span>
                  <span>Neu Erfasst: ${city.added_kerbs}</span>
                </div>
              </th>
              <th>
                <div class="key-table__column">
                  <span class="key-table__column__value"><span class="key-table__column__key">height:</span> ${city.perc_with_kerb_height}%</span>
                </div>
              </th>
              ${city != first ? `
                <th>
                  <div class="key-table__column">
                    <span class="key-table__column__value"><span class="key-table__column__key">height:</span> ${first.perc_with_kerb_height}%</span>
                  </div>
                </th>
              ` : ''}
            </tr>
          </table>
          <button class="contribute-button" onclick="openContributionModal()">Beitragen ></button>
        </div>
      </div>`;
  }

  window.onload = () => {
    // Fetch CSV Data
    fetch('https://api.cargorocket.de/dr/data/ranking.csv').then((rawData) => rawData.text()).then((data) => {
      // Parse CSV data
      cities = Papa.parse(data, {
        header: true,
        skipEmptyLines: true,
      }).data.sort((a, b) => b.perc_total - a.perc_total);
      // Setup Table
      const listRoot = document.getElementById('city-list');
      cities.forEach((city, index) => {
        listRoot.innerHTML =  listRoot.innerHTML + renderCityElement(city, cities[0], index);
      });
    });
  }
</script>

<div class="ranking">
  <h1 class="title">{{page.title}}</h1>
  <div class="info">
    <p class="description">
      {{page.description}}
    </p>
    <a href="/2021/04/17/mapping-tutorial.html"> Zum Starter-Guide ➜</a>
  </div>
  <div class="ranking-select">
    <button class="ranking-select__button left" id="ord-new" onclick="selectRanking(this)">
      <span>Neue Elemente</span>
      {%- include icons/icon-add.html -%}
    </button>
    <button class="ranking-select__button right ranking-select__button--active" id="ord-percentage" onclick="selectRanking(this)">
      {%- include icons/icon-percentage.html -%}
      <span>Datenqualität</span>
    </button>
  </div>
  <div class="rank-table">
    <div class="rank-table__city-list" id="city-list">
      <!-- Generated List content belongs here -->
    </div>
  </div>
  <div class="copyright">Icons made by <a href="https://www.freepik.com" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>
</div>